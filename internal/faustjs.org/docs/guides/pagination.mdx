---
slug: /guides/pagination
title: Pagination
description: Add pagination to your Faust.js site
---

This guide covers how to set up Pagination in your Faust.js site with Apollo and WPGraphQL.

## Setup

To get started, create a folder in the root of your Faust.js project called `plugins`.  In this `plugins` folder, create a file called `RelayStylePagination.js` and insert this content:

```js
import { relayStylePagination } from "@apollo/client/utilities";

export class RelayStylePagination {
  apply(hooks) {
    const { addFilter } = hooks;

    addFilter("apolloClientInMemoryCacheOptions", "faust", (options) => {
      return {
        ...options,
        typePolicies: {
          ...options.typePolicies,
          RootQuery: {
            ...options.typePolicies.RootQuery,
            fields: {
              posts: relayStylePagination(),
            },
          },
          ContentType: {
            fields: {
              contentNodes: relayStylePagination(),
            },
          },
        },
      };
    });
  }
}
```
The Apollo client can implement [relay-style pagination](https://www.apollographql.com/docs/react/pagination/cursor-based/) with the relay spec using merge and read functions, which means all the details of `connections`, `edges` and `pageInfo` can be abstracted away, into a single, reusable helper function. WPGraphQL follows the relay spec as well.
We are importing the `relayStylePagination` function from Apollo and then a `class component` is created which is the basic syntax of the Faust plugin.

Next, we have an `apply` method with the `hooks` parameter which is an object that gives you a function called `addFilter`. The `addFilter` function allows us to modify the [Apollo Clientâ€™s `InMemoryCacheOptions`](https://www.apollographql.com/docs/react/caching/cache-configuration/).

The `addFilter` hook is taken and calls the memory cache function options. The options are coming from the Apollo Client Cache configuration. These options allow for configuring the cache for  pagination. The faust namespace follows that.

## Register the Plugin for Pagination

Import and register your plugin for pagination in `faust.config.js`

```
import { setConfig } from "@faustwp/core";
import templates from "./wp-templates";
import possibleTypes from "./possibleTypes.json";
import { RelayStylePagination } from "./plugins/RelayStylePagination";

/**
 * @type {import('@faustwp/core').FaustConfig}
 **/
export default setConfig({
  templates,
  experimentalPlugins: [new RelayStylePagination()],
  possibleTypes,
});
```

## Example WPGraphQL Pagination Query

```
const GET_POSTS = gql`
  query getPosts($first: Int!, $after: String) {
    posts(first: $first, after: $after) {
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        node {
          id
          databaseId
          title
          slug
        }
      }
    }
  }
`;
```
This is an example of a query with the fields for pagination being `hasNextPage` and `endCursor`.


Lastly, do not forget to run `npm run generate` since the schema was updated with WPGraphQL and Pagination.  You should now be able to query for cursor based paginated content in your Faust.js site.

If you need an in depth start to finish article with an example, please visit the developer relations article on [working with Apollo in Faust.js](https://developers.wpengine.com/blog/working-with-the-apollo-client-in-faust-js).



